(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(18),c=t.n(a),u=t(9),o=t(8),i=t(3),s=t(0),d=function(e){var n=e.filteredArray,t=e.deletePerson;return Object(s.jsx)("div",{children:n.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:[e.name," ",e.number]}),Object(s.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.name)}))})},l=function(e){var n=e.handleSubmit,t=e.newName,r=e.handleNameInput,a=e.handleNumberInput,c=e.newPhone;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r}),Object(s.jsx)("br",{}),"no.: ",Object(s.jsx)("input",{value:c,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.filterTerm,t=e.handleFilter;return Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"filter names:"}),Object(s.jsx)("input",{value:n,onChange:t})]})},m=t(5),j=t.n(m),f="/api/persons",h={getAll:function(){return j.a.get(f)},addPerson:function(e){return j.a.post(f,e)},deletePerson:function(e){return j.a.delete(f+"/"+e)},updatePerson:function(e){return j.a.put(f+"/"+e.id,e)}},p=function(e){var n=e.message,t=e.type;return""===n.message?null:Object(s.jsx)("div",{className:t,children:n})},O=function(){var e=Object(r.useState)([{name:"Arto Hellas",number:"040-123456"},{name:"Ada Lovelace",number:"39-44-5323523"},{name:"Dan Abramov",number:"12-43-234345"},{name:"Mary Poppendieck",number:"39-23-6423122"}]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),m=Object(i.a)(c,2),j=m[0],f=m[1],O=Object(r.useState)(""),v=Object(i.a)(O,2),x=v[0],g=v[1],y=Object(r.useState)(""),w=Object(i.a)(y,2),P=w[0],k=w[1],A=Object(r.useState)({message:"",type:""}),N=Object(i.a)(A,2),S=N[0],I=N[1];Object(r.useEffect)((function(){console.log("effect"),h.getAll().then((function(e){a(e.data)}))}),[]);var C=P?t.filter((function(e){return e.name.toLowerCase().includes(P)})):[],T=function(){if(window.confirm("".concat(j," already exists in the phonebook, would you like to update their number to ").concat(x,"?"))){var e=(c=j,t.find((function(e){return e.name===c}))),n=function(e){return t.findIndex((function(n){return n.name===e}))}(j),r=Object(u.a)(Object(u.a)({},e),{},{number:x});h.updatePerson(r).then((function(e){var r=Object(o.a)(t),c=e.data;r[n]=c,a(r),f(""),g("")})).then((function(){I({message:"".concat(r.name," updated!"),type:"success"}),setTimeout((function(){I({message:"",type:""})}),5e3)})).catch((function(e){I({message:"Information on ".concat(r.name,"  has been deleted from the server."),type:"error"}),setTimeout((function(){I({message:"",type:""})}),5e3)}))}var c};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(p,{message:S.message,type:S.type}),Object(s.jsx)(b,{filterTerm:P,handleFilter:function(e){return k(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new number"}),Object(s.jsx)(l,{handleSubmit:function(e){e.preventDefault(),t.some((function(e){return e.name===j}))?T():(!function(){var e={name:j,number:x};h.addPerson(e).then((function(e){a([].concat(Object(o.a)(t),[e.data]))})).then((function(){I({message:"".concat(e.name," added!"),type:"success"}),setTimeout((function(){I({message:"",type:""})}),5e3)}))}(),f(""),g(""))},newName:j,newPhone:x,handleNameInput:function(e){return f(e.target.value)},handleNumberInput:function(e){return g(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{filteredArray:C,deletePerson:function(e,n){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&h.deletePerson(e).then((function(){return a(t.filter((function(n){return n.id!==e?n:null})))}))}})]})};t(42);c.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1f752318.chunk.js.map