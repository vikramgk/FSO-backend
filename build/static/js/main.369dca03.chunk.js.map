{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Message.js","App.js","index.js"],"names":["Persons","filteredArray","deletePerson","map","person","name","number","onClick","id","PersonForm","handleSubmit","newName","handleNameInput","handleNumberInput","newPhone","onSubmit","value","onChange","type","Filter","filterTerm","handleFilter","baseUrl","personService","getAll","axios","get","addPerson","post","delete","updatePerson","put","Message","message","className","App","useState","persons","setPersons","setNewName","setNewPhone","setfilterTerm","setMessage","useEffect","console","log","then","response","data","filter","toLowerCase","includes","window","confirm","currentPersonDetails","personName","find","currentPersonDetailsIndex","findIndex","findPersonIndex","newPersonDetails","personsTemp","updatedPerson","setTimeout","catch","error","event","target","preventDefault","some","newPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.369dca03.chunk.js","sourcesContent":["const Persons = ({ filteredArray, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      {filteredArray.map(person => \r\n        <div key={person.name}>\r\n          <p >{person.name} {person.number}</p>\r\n          <button onClick={() => deletePerson(person.id, person.name)}>delete</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","const PersonForm = ({ handleSubmit, newName, handleNameInput, handleNumberInput, newPhone }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameInput} />\r\n                <br />\r\n                no.: <input value={newPhone} onChange={handleNumberInput} />\r\n            </div>\r\n            <div>\r\n                <button type='submit'>add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","const Filter = ({ filterTerm, handleFilter }) => {\r\n    return (\r\n        <div>\r\n            <p>filter names:</p>\r\n            <input value={filterTerm} onChange={handleFilter}></input>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl  = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst addPerson = person => {\r\n    return axios.post(baseUrl, person)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    return axios.delete(baseUrl + '/' + id)\r\n}\r\n\r\nconst updatePerson = person => {\r\n    return axios.put(baseUrl + '/' + person.id, person)\r\n}\r\n\r\nconst personService = {\r\n    getAll,\r\n    addPerson,\r\n    deletePerson,\r\n    updatePerson\r\n};\r\n\r\nexport default personService;","const Message = ({ message, type }) => {\r\n\r\n    if (message.message === '') {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={type}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([\n    { name: 'Arto Hellas', number: '040-123456' },\n    { name: 'Ada Lovelace', number: '39-44-5323523' },\n    { name: 'Dan Abramov', number: '12-43-234345' },\n    { name: 'Mary Poppendieck', number: '39-23-6423122' }\n  ])\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [filterTerm, setfilterTerm] = useState('')\n  const [message, setMessage] = useState({message: '', type:''})\n\n  const handleNameInput = (event) => setNewName(event.target.value);\n  const handleNumberInput = (event) => setNewPhone(event.target.value);\n  const handleFilter = (event) => setfilterTerm(event.target.value);\n\n  useEffect(() => {\n    console.log(\"effect\")\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  var filteredArray = filterTerm ?\n    persons.filter(person => person.name.toLowerCase().includes(filterTerm)) :\n    [];\n\n  const checkIfExists = () => persons.some(person => person.name === newName);\n  const findPerson = personName => persons.find(person => person.name === personName);\n  const findPersonIndex = personName => persons.findIndex(person => person.name === personName);\n\n  const addPerson = () => {\n    const newPerson = {\n      name: newName,\n      number: newPhone\n    }\n\n    personService\n      .addPerson(newPerson)\n      .then(response => {\n        // add the created object to the state\n        setPersons([\n          ...persons,\n          response.data\n        ]);\n      })\n      .then(() => {\n        setMessage({message: `${newPerson.name} added!`, type: 'success'})\n        setTimeout(() => {\n          setMessage({message: '', type:''})\n        }, 5000)\n      })\n      \n  }\n\n  const updatePerson = () => {\n    if (window.confirm(`${newName} already exists in the phonebook, would you like to update their number to ${newPhone}?`)) {\n      const currentPersonDetails = findPerson(newName)\n      const currentPersonDetailsIndex = findPersonIndex(newName)\n\n      const newPersonDetails = {\n        ...currentPersonDetails,\n        number: newPhone\n      }\n\n      // update server\n      personService\n        .updatePerson(newPersonDetails)\n        .then(response => {\n          // update local state\n          const personsTemp = [...persons]\n          const updatedPerson = response.data\n\n          personsTemp[currentPersonDetailsIndex] = updatedPerson\n          setPersons(personsTemp)\n\n          // reset input fields \n          setNewName('');\n          setNewPhone('');\n        })\n        .then(() => {\n          setMessage({message: `${newPersonDetails.name} updated!`, type: 'success'})\n          setTimeout(() => {\n            setMessage({message: '', type:''})\n          }, 5000)\n        })\n        .catch(error => {\n          setMessage({message: `Information on ${newPersonDetails.name}  has been deleted from the server.`, type: 'error'})\n          setTimeout(() => {\n            setMessage({message: '', type:''})\n          }, 5000)\n        })\n    }\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    if (!checkIfExists()) {\n      addPerson();\n      setNewName('');\n      setNewPhone('');\n    } else {\n      updatePerson()\n    }\n  };\n\n  const deletePerson = (id, person) => {\n    if (window.confirm(`Are you sure you want to delete ${person}?`)) {\n      personService\n        .deletePerson(id)\n        .then(() => setPersons(persons.filter(person => person.id !== id ? person : null)))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message.message} type={message.type}/>\n      <Filter filterTerm={filterTerm} handleFilter={handleFilter} />\n      <h2>Add a new number</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newPhone={newPhone}\n        handleNameInput={handleNameInput}\n        handleNumberInput={handleNumberInput}\n      />\n      <h2>Numbers</h2>\n      <Persons filteredArray={filteredArray} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './App.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}